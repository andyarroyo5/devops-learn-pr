

[![feedback](https://www.visualstudio.com/wp-content/uploads/2017/01/feedback-button-normal.svg)](#)













[![](https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE1Mu3b?ver=5c31)
Microsoft](https://www.microsoft.com)



Visual
Studio



  - [Microsoft 365](https://www.microsoft.com/en-us/microsoft-365)

  - [Azure](https://azure.microsoft.com)

  - [Office 365](https://products.office.com/en-us/business/office)

  - [Dynamics 365](https://dynamics.microsoft.com/en-us/)

  - [SQL](https://www.microsoft.com/sql-server/)

  - [Windows 10](https://www.microsoft.com/en-us/windowsforbusiness)

  - 
    
    
    
    More
    
      - Products & Services
          - [Windows
            Server](https://www.microsoft.com/cloud-platform/windows-server)
          - [Enterprise Mobility +
            Security](https://www.microsoft.com/cloud-platform/enterprise-mobility-security)
          - [Power
            BI](https://powerbi.microsoft.com/en-us/)
          - [Teams](https://products.office.com/en-us/microsoft-teams/group-chat-software)
          - [Visual Studio](https://www.visualstudio.com/)
          - [Surface for
            Business](https://www.microsoft.com/en-us/surface/business/overview)
      - Emerging Technologies
          - [AI](https://www.microsoft.com/ai/)
          - [Internet of
            Things](https://www.microsoft.com/internet-of-things)
          - [Azure Cognitive
            Services](https://azure.microsoft.com/services/cognitive-services/)
          - [Quantum](https://www.microsoft.com/quantum/)
          - [Research](https://www.microsoft.com/research/)
      - Developer & IT
          - [Docs](https://docs.microsoft.com/en-us/)
          - [TechNet](https://technet.microsoft.com/en-us/ms376608.aspx)
          - [Developer Network](https://msdn.microsoft.com/en-us)
          - [Windows Dev
            Center](https://developer.microsoft.com/en-us/windows)
          - [Windows IT Pro
            Center](https://www.microsoft.com/en-us/itpro/windows)
          - [FastTrack](https://fasttrack.microsoft.com/office)
      - Partner
          - [Partner Network](https://partner.microsoft.com/)
          - [Solution
            Providers](https://www.microsoft.com/solution-providers/)
          - [Partner
            Center](https://partnercenter.microsoft.com/partner/home)
          - [Cloud
            Hosting](https://www.microsoft.com/en-us/cloudandhosting)
      - Industries
          - [Education](https://www.microsoft.com/en-us/education)
          - [Financial
            services](https://enterprise.microsoft.com/en-us)
          - [Government](https://enterprise.microsoft.com/en-us/industries/government/)
          - [Health](https://enterprise.microsoft.com/en-us/industries/health/)
          - [Manufacturing &
            resources](https://enterprise.microsoft.com/en-us/industries/discrete-manufacturing/)
          - [Retail](https://enterprise.microsoft.com/en-us/industries/retail-and-consumer-goods/)
      - Other
          - [Security](https://www.microsoft.com/security/)
          - [Licensing](https://www.microsoft.com/licensing/)
          - [AppSource](https://appsource.microsoft.com/)
          - [Azure
            Marketplace](https://azuremarketplace.microsoft.com/marketplace/)
          - [Events](https://events.microsoft.com/)
      - [View
all](https://www.microsoft.com/en-us/sitemap.aspx)
    
    













Sign
in

















[Visual Studio](https://www.visualstudio.com/) [Free
Account](https://go.microsoft.com/fwlink/?LinkId=307137&clcid=0x409&wt.mc_id=o~msft~vscom~product-vsts-nav~menu&campaign=o~msft~vscom~product-vsts-nav~menu)

[Visual Studio Team
Services](https://www.visualstudio.com/team-services/)



Features

  - [Git](https://www.visualstudio.com/team-services/git/)
  - [TFVC](https://www.visualstudio.com/team-services/tfvc/)
  - [Agile
    Tools](https://www.visualstudio.com/team-services/agile-tools/)
  - [CI/CD](https://www.visualstudio.com/team-services/continuous-integration/)
  - [All Features](https://www.visualstudio.com/team-services/features/)





Pricing

  - [VSTS](https://www.visualstudio.com/team-services/pricing/)
  - [TFS](https://www.visualstudio.com/team-services/tfs-pricing/)
  - [Feature
    Comparisons](https://www.visualstudio.com/team-services/compare-features/)





News

  - [Release
    Notes](https://www.visualstudio.com/team-services/release-notes/)
  - [Microsoft DevOps Blog](https://blogs.msdn.microsoft.com/devops/)
  - [VSTS Customer
    Stories](https://www.visualstudio.com/team-services/case-studies/)





Support

  - [VSTS](https://www.visualstudio.com/team-services/support/)
  - [Team Foundation
    Server](https://www.visualstudio.com/team-services/tfs_support/)
  - [Documentation](https://docs.microsoft.com/en-us/vsts/index)
  - [FAQ](https://www.visualstudio.com/team-services/faq/)



[Subscriber
Access](https://my.visualstudio.com/Benefits?wt.mc_id=o~msft~vscom~nav&campaign=o~msft~vscom~nav)
[Free
Account](https://go.microsoft.com/fwlink/?LinkId=307137&clcid=0x409&wt.mc_id=o~msft~vscom~product-vsts-nav~menu&campaign=o~msft~vscom~product-vsts-nav~menu)

































[Home](https://www.visualstudio.com)/Using
a simple code churn metric to find software
bugs



















# Using a simple code churn metric to find software bugs

### By Hitesh Sajnani



#### About the author





[Facebook](https://www.facebook.com/sharer.php?u=https%3A%2F%2Fwww.visualstudio.com%2Flearn%2Fusing-simple-code-churn-metric-find-software-bugs%2F&t=Using%20a%20simple%20code%20churn%20metric%20to%20find%20software%20bugs "Facebook")[Twitter](https://twitter.com/share?text=Using%20a%20simple%20code%20churn%20metric%20to%20find%20software%20bugs&url=https%3A%2F%2Fwww.visualstudio.com%2Flearn%2Fusing-simple-code-churn-metric-find-software-bugs%2F "Twitter")[Linkedin](https://www.linkedin.com/shareArticle?mini=true&url=https://www.visualstudio.com/learn/using-simple-code-churn-metric-find-software-bugs/&title=Using%20a%20simple%20code%20churn%20metric%20to%20find%20software%20bugs&summary=Using%20a%20simple%20code%20churn%20metric%20to%20find%20software%20bugs%0D%0AAuthors%3A%20Hitesh%20Sajnani%20and%20Jacek%20Czerwonka%0D%0ALast%20Update%3A%209%2F27%2F2016%0D%0A%0D%0AA%20common%20problem%20in%20software%20engineering%20is%20understanding%20how%20to%20evolve%20large%20software%20projects%2C%20particularly%20when%20trying%20to%20main "Linkedin")[Email](mailto:?subject=Using%20a%20simple%20code%20churn%20metric%20to%20find%20software%20bugs&body=https://www.visualstudio.com/learn/using-simple-code-churn-metric-find-software-bugs/ "Email")



















# Using a simple code churn metric to find software bugs

### Authors: Hitesh Sajnani and Jacek Czerwonka

Last Update: 9/27/2016

A common problem in software engineering is understanding how to evolve
large software projects, particularly when trying to maintain,
modernize, or refactor. Often the software source code base has grown
over time and it is not obvious where to invest to improve quality and
reduce technical debt. New source files are added to extend the
functionality and existing files are changed to accommodate new features
or to fix bugs. But what is the impact of these modifications on the
system?

It would be useful to have a heuristic to identify an 80% quality
improvement for 20% of the potential effort.

## Use source history to identify technical debt

How can we monitor the quality of our system as it evolves and we
refactor? This article proposes a metric called Active files to capture
this evolutionary behavior of a system and also describe its
relationship with bugs, changes and size of the system \[1\].

## Newly added files mask dependencies and impact code understanding

As systems grow, it becomes harder for developers to understand their
architecture. New developers struggle to figure out what the codebase
contains and where they should put their changes. Often, developers will
correct a symptom instead of a root-cause and inadvertently reduce
long-term maintainability. They introduce errors because they are not
aware of other relevant code.

### Avoid unexpected consequences

Under such conditions, how can we scale gracefully? If the new feature
needs to adjust many places in the codebase, it will be difficult for a
developer to make changes without side-effects leading to bugs. The more
places need to be touched, the more the developer will need to learn in
order to implement a feature properly and the longer the work will take.

### Strive for single responsibility

On the other hand, if the newly added files focus on a single
responsibility and are architecturally decoupled from the rest of the
system, the chances of developers having to modify them in future are
usually lower. In such cases, although there may be many thousands of
files present in the system, only a small subset of them might be in
need of continuous change, and therefore remain permanently ‘active’.
This is the promise of microservices architecture.

### Keep few files active and minimize work in process

Having a small set of active files creates a more stable system.
Developers do not have to manage too many assumptions or spend extra
effort rediscovering existing assumptions. For the same reason, keep
this set of active files small even with a growing code base.

### A missing metric to understand churn

Creating a metric for monitoring the evolution of the system will have
two advantages:

  - We can govern the risk of side effects from unwanted complexity.
  - We can determine where the code base most needs to be refactored to
    improve quality.

In this research, we experimented with the practical value of this
metric.

## Defining active and recurrently active files

Active files represent only the subset of total files in the system that
continue to change over time. A file f is defined to be active at date d
with an activity window t (number of days) if it has changed on date d
and at least once between d-t and d-1. This is shown visually in Figure
1 where we use ℂ*x* to denote the set of files changed on a given date.

![Figure 1: Defining an active
file](https://www.visualstudio.com/wp-content/uploads/2017/08/defining_active_file.png)

We extend this definition to recurrently active files. A file is
recurrently active with periodicity n if it is active and has also
changed at least once in each of the previous n active windows. For
example, as visually depicted in Figure 2, file f is active at date d,
with activity window t, and recurrence of 5.

![Figure 2: Defining a recurrent active
file](https://www.visualstudio.com/wp-content/uploads/2017/08/recurrent_active_file.png)

## Compute active files as a proportion of the code base

Keeping the above definitions in mind, we can classify any file in the
codebase as active, recurrently active or stable. The ratio of the
number of active files to the total number of files comprising the
product can be determined at any point in time.

We computed the active files metric on six large software systems within
Microsoft ranging from products to services to understand their
relationship with various factors related to the evolution of a software
system (e.g., size and growth, changes, defects, etc.).

## Active files propagate bugs

In these systems, we found that **active files constitute only between
2%-8% of the total system size, contribute 20%-40% of system file
changes, and are responsible for 60%-90% of all bugs**. The majority,
65%-95%, of the active files are architectural hub files which change
due to feature addition as opposed to fixing defects.

![Figure 3: Percent monthly active files in relation to all files in the
code](https://www.visualstudio.com/wp-content/uploads/2017/08/monthly_active_files.png)

Figure 3 shows the percent size of active files to total files in a
software system throughout its lifecycle for several software projects
we studied.

## Why monitor active files?

Development teams might be interested in measuring and monitoring their
active file set for three primary reasons.

### Program comprehension

Active files are typically a small subset of all source files but they
have the most impact on a system’s evolution. By understanding the role
of active files in the system first, developers might be able to quickly
gain a good understanding of the underlying architecture. Although far
from filling the needs of advanced development work, this knowledge is
critical for initial comprehension of the system.

### Managing evolution

While growing code bases is a condition that is difficult to avoid,
writing code in a way that tends to bring closure to files quickly can
certainly help in scaling up evolution in a more manageable way.
Tracking active files and ensuring that they are strictly managed,
rigorously tested, and well-designed is one way to have high stability
and low defect density in a system.

### Code reviews and testing based on high risk

If changes to active files are as bug-prone as we think they are,
keeping that set in mind while verifying the code change will allow us
to apply our resources more efficiently. Developing light-weight smart
test procedures that take active files into account would be an
excellent way for automated tests to cover the most important areas of
code first. Moreover, a code review system where active files are
flagged can be useful.

## References

\[1\] [Lukas Schulte, Hitesh Sajnani, Jacek Czerwonka: Active Files as a
Measure of Software Maintainability.
ICSE 2014: 34-43](http://dl.acm.org/citation.cfm?doid=2591062.2591176)



  [Hitesh
Sajnani](https://www.visualstudio.com/author/hitsaj/ "Posts by Hitesh Sajnani")
  
2017-08-14T15:21:57+00:00 







![Hitesh
Sajnani](https://www.visualstudio.com/wp-content/uploads/2017/08/Hitesh-Sajnani_avatar_1502749067.jpg)





### Hitesh Sajnani

Hitesh is currently a Software Engineer in the Tools for Software
Engineering (TSE) group at Microsoft. Before joining TSE, Hitesh
graduated with a PhD in Informatics from the School of Information and
Computer Science, University of California Irvine. His dissertation
topic was Large-Scale Code Clone Detection.















  - [DevOps at
    Microsoft](https://www.visualstudio.com/learn/devops-at-microsoft/)
  - [How We Work with Visual Studio Team
    Services (VSTS)](#)
      - [Moving to Cloud
        Cadence](https://www.visualstudio.com/learn/moving-cloud-cadence/)
      - [How We Use Git at
        Microsoft](https://www.visualstudio.com/learn/use-git-microsoft/)
      - [Evolving Test Practices at
        Microsoft](https://www.visualstudio.com/learn/evolving-test-practices-microsoft/)
  - [How We Architect Visual Studio Team
    Services (VSTS)](#)
      - [From Monolith to Cloud
        Service](https://www.visualstudio.com/learn/monolith-cloud-service/)
      - [Achieving No Downtime Through
        Versioned Service
        Updates](https://www.visualstudio.com/learn/achieving-no-downtime-versioned-service-updates/)
      - [Progressive Experimentation with
        Feature
        Flags](https://www.visualstudio.com/learn/progressive-experimentation-feature-flags/)
      - [Patterns for Resiliency in the
        Cloud](https://www.visualstudio.com/learn/patterns-resiliency-cloud/)
      - [Shift Left to Make Testing Fast and
        Reliable](https://www.visualstudio.com/learn/shift-left-make-testing-fast-reliable/)
      - [Eliminating Flaky
        Tests](https://www.visualstudio.com/learn/eliminating-flaky-tests/)
      - [Shift Right to Test in
        Production](https://www.visualstudio.com/learn/shift-right-test-production/)
  - [One Engineering System at
    Microsoft](#)
      - [Moving 65,000 Microsofties to DevOps
        on the Public
        Cloud](https://www.visualstudio.com/learn/moving-65000-microsofties-devops-public-cloud/)
      - [Universal Store: Journey to
        Continuous Delivery and
        DevOps](https://www.visualstudio.com/learn/universal-store-journey-continuous-delivery-devops/)
  - [Microsoft Research on DevOps
    Productivity](#)
      - [Boosting your code reviews with
        useful
        comments](https://www.visualstudio.com/learn/boosting-code-reviews-useful-comments/)
      - [Code reviews are not (primarily) for
        finding
        bugs](https://www.visualstudio.com/learn/code-reviews-not-primarily-finding-bugs/)
      - [Code ownership and software
        quality](https://www.visualstudio.com/learn/code-ownership-software-quality/)
      - [Getting the noise out of test
        runs](https://www.visualstudio.com/learn/getting-noise-test-runs/)
      - [Improving software security with
        stack traces from bug
        reports](https://www.visualstudio.com/learn/improving-software-security-stack-traces-bug-reports/)
      - [Is 100% code coverage worth the
        cost?](https://www.visualstudio.com/learn/100-code-coverage-worth-cost/)
      - [Software testing at scale to
        increase
        velocity](https://www.visualstudio.com/learn/software-testing-scale-increase-velocity/)
      - [Test while building to maximize test
        effectiveness and minimize
        cost](https://www.visualstudio.com/learn/test-building-maximize-test-effectiveness-minimize-cost/)
      - [Using a simple code churn metric to
        find software
        bugs](https://www.visualstudio.com/learn/using-simple-code-churn-metric-find-software-bugs/)



















  - [** DevOps at Microsoft](/learn/devops-at-microsoft/)
  - [** Blog](https://blogs.msdn.microsoft.com/devops/)
  - [** Learn DevOps](/learn/what-is-devops/)
  - [![](/wp-content/uploads/2016/11/git-footer-icons-dark_2.png) Learn
    Git](/learn-git/)
  - [** Learn Agile](/agile/)
  - [** DevOps Self-Assessment](https://devopsassessment.net/)













[Visual Studio Team Services](/team-services/) provides the tools you
need to continuously deliver
value





















#### What's new

  - [Surface
    Book 2](https://www.microsoft.com/en-us/surface/devices/surface-book-2/overview)
  - [Surface
    Pro](https://www.microsoft.com/en-us/surface/devices/surface-pro/overview)
  - [Xbox One X](https://www.xbox.com/en-us/xbox-one-x)
  - [Xbox One S](https://www.xbox.com/en-us/xbox-one-s?xr=shellnav)
  - [VR & mixed
    reality](https://www.microsoft.com/en-us/store/b/virtualreality)
  - [Windows 10
    apps](https://www.microsoft.com/en-us/windows/windows-10-apps)
  - [Office
apps](https://store.office.com/en-us/appshome.aspx?)





#### Store & Support

  - [Account profile](https://account.microsoft.com/)
  - [Download Center](https://www.microsoft.com/en-us/download)
  - [Sales &
    support](https://go.microsoft.com/fwlink/p/?LinkID=824761&clcid=0x409)
  - [Returns](https://go.microsoft.com/fwlink/p/?LinkID=824764&clcid=0x409)
  - [Order tracking](https://account.microsoft.com/orders)
  - [Store
    locations](https://www.microsoft.com/en-us/store/locations/find-a-store)
  - [Support](https://support.microsoft.com/en-us)
  - [Buy online, pick up in
    store](https://www.microsoft.com/en-us/store/b/buy-online-pick-up-in-store?icid=uhf_footer_bopuis)





#### Education

  - [Microsoft in education](https://www.microsoft.com/en-us/education)
  - [Office for
    students](https://www.microsoft.com/en-us/education/products/office/default.aspx)
  - [Office 365 for
    schools](https://products.office.com/en-us/academic/compare-office-365-education-plans)
  - [Deals for students &
    educators](https://www.microsoft.com/en-us/store/b/student)
  - [Microsoft Azure in
    education](https://azure.microsoft.com/en-us/community/education/)









#### Enterprise

  - [Microsoft Azure](https://azure.microsoft.com/)
  - [Enterprise](https://enterprise.microsoft.com/en-us/)
  - [Data platform](https://www.microsoft.com/en-us/sql-server/)
  - [Find a solutions
    provider](https://www.microsoft.com/en-us/solution-providers)
  - [Microsoft partner resources](https://partner.microsoft.com/en-us/)
  - [Microsoft
    AppSource](https://go.microsoft.com/fwlink/?LinkID=808093)
  - [Manufacturing &
    resources](https://enterprise.microsoft.com/en-us/industries/discrete-manufacturing/)
  - [Financial
services](https://enterprise.microsoft.com/en-us)





#### Developer

  - [Microsoft Visual Studio](https://www.visualstudio.com/)
  - [Windows Dev Center](https://developer.microsoft.com/en-us/windows)
  - [Developer Network](https://msdn.microsoft.com/en-us)
  - [TechNet](https://technet.microsoft.com/en-us)
  - [Microsoft Virtual Academy](https://mva.microsoft.com/)
  - [Microsoft developer
    program](https://developer.microsoft.com/en-us/store/register)
  - [Channel 9](https://channel9.msdn.com/)
  - [Office Dev
Center](https://developer.microsoft.com/en-us/office)





#### Company

  - [Careers](https://careers.microsoft.com/)
  - [About Microsoft](https://www.microsoft.com/en-us/about)
  - [Company news](https://news.microsoft.com/)
  - [Privacy at Microsoft](https://privacy.microsoft.com/en-us)
  - [Investors](https://www.microsoft.com/investor/default.aspx)
  - [Diversity and
    inclusion](https://www.microsoft.com/en-us/diversity/)
  - [Accessibility](https://www.microsoft.com/en-us/accessibility/home)
  - [Security](https://www.microsoft.com/en-us/security/default.aspx)







[English (United States)](#)

  - [Contact us](https://beta.visualstudio.com/support/)
  - [Privacy &
    cookies](https://www.microsoft.com/EN-US/privacystatement/OnlineServices/Default.aspx)
  - [Terms of use](https://azure.microsoft.com/en-us/support/legal/)
  - [Trademarks](https://www.microsoft.com/trademarks)
  - [About our ads](http://choice.microsoft.com/)
  - © Microsoft 2018












