

[![feedback](https://www.visualstudio.com/wp-content/uploads/2017/01/feedback-button-normal.svg)](#)













[![](https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE1Mu3b?ver=5c31)
Microsoft](https://www.microsoft.com)



Visual
Studio



  - [Microsoft 365](https://www.microsoft.com/en-us/microsoft-365)

  - [Azure](https://azure.microsoft.com)

  - [Office 365](https://products.office.com/en-us/business/office)

  - [Dynamics 365](https://dynamics.microsoft.com/en-us/)

  - [SQL](https://www.microsoft.com/sql-server/)

  - [Windows 10](https://www.microsoft.com/en-us/windowsforbusiness)

  - 
    
    
    
    More
    
      - Products & Services
          - [Windows
            Server](https://www.microsoft.com/cloud-platform/windows-server)
          - [Enterprise Mobility +
            Security](https://www.microsoft.com/cloud-platform/enterprise-mobility-security)
          - [Power
            BI](https://powerbi.microsoft.com/en-us/)
          - [Teams](https://products.office.com/en-us/microsoft-teams/group-chat-software)
          - [Visual Studio](https://www.visualstudio.com/)
          - [Surface for
            Business](https://www.microsoft.com/en-us/surface/business/overview)
      - Emerging Technologies
          - [AI](https://www.microsoft.com/ai/)
          - [Internet of
            Things](https://www.microsoft.com/internet-of-things)
          - [Azure Cognitive
            Services](https://azure.microsoft.com/services/cognitive-services/)
          - [Quantum](https://www.microsoft.com/quantum/)
          - [Research](https://www.microsoft.com/research/)
      - Developer & IT
          - [Docs](https://docs.microsoft.com/en-us/)
          - [TechNet](https://technet.microsoft.com/en-us/ms376608.aspx)
          - [Developer Network](https://msdn.microsoft.com/en-us)
          - [Windows Dev
            Center](https://developer.microsoft.com/en-us/windows)
          - [Windows IT Pro
            Center](https://www.microsoft.com/en-us/itpro/windows)
          - [FastTrack](https://fasttrack.microsoft.com/office)
      - Partner
          - [Partner Network](https://partner.microsoft.com/)
          - [Solution
            Providers](https://www.microsoft.com/solution-providers/)
          - [Partner
            Center](https://partnercenter.microsoft.com/partner/home)
          - [Cloud
            Hosting](https://www.microsoft.com/en-us/cloudandhosting)
      - Industries
          - [Education](https://www.microsoft.com/en-us/education)
          - [Financial
            services](https://enterprise.microsoft.com/en-us)
          - [Government](https://enterprise.microsoft.com/en-us/industries/government/)
          - [Health](https://enterprise.microsoft.com/en-us/industries/health/)
          - [Manufacturing &
            resources](https://enterprise.microsoft.com/en-us/industries/discrete-manufacturing/)
          - [Retail](https://enterprise.microsoft.com/en-us/industries/retail-and-consumer-goods/)
      - Other
          - [Security](https://www.microsoft.com/security/)
          - [Licensing](https://www.microsoft.com/licensing/)
          - [AppSource](https://appsource.microsoft.com/)
          - [Azure
            Marketplace](https://azuremarketplace.microsoft.com/marketplace/)
          - [Events](https://events.microsoft.com/)
      - [View
all](https://www.microsoft.com/en-us/sitemap.aspx)
    
    













Sign
in

















[Visual Studio](https://www.visualstudio.com/) [Free
Account](https://go.microsoft.com/fwlink/?LinkId=307137&clcid=0x409&wt.mc_id=o~msft~vscom~product-vsts-nav~menu&campaign=o~msft~vscom~product-vsts-nav~menu)

[Visual Studio Team
Services](https://www.visualstudio.com/team-services/)



Features

  - [Git](https://www.visualstudio.com/team-services/git/)
  - [TFVC](https://www.visualstudio.com/team-services/tfvc/)
  - [Agile
    Tools](https://www.visualstudio.com/team-services/agile-tools/)
  - [CI/CD](https://www.visualstudio.com/team-services/continuous-integration/)
  - [All Features](https://www.visualstudio.com/team-services/features/)





Pricing

  - [VSTS](https://www.visualstudio.com/team-services/pricing/)
  - [TFS](https://www.visualstudio.com/team-services/tfs-pricing/)
  - [Feature
    Comparisons](https://www.visualstudio.com/team-services/compare-features/)





News

  - [Release
    Notes](https://www.visualstudio.com/team-services/release-notes/)
  - [Microsoft DevOps Blog](https://blogs.msdn.microsoft.com/devops/)
  - [VSTS Customer
    Stories](https://www.visualstudio.com/team-services/case-studies/)





Support

  - [VSTS](https://www.visualstudio.com/team-services/support/)
  - [Team Foundation
    Server](https://www.visualstudio.com/team-services/tfs_support/)
  - [Documentation](https://docs.microsoft.com/en-us/vsts/index)
  - [FAQ](https://www.visualstudio.com/team-services/faq/)



[Subscriber
Access](https://my.visualstudio.com/Benefits?wt.mc_id=o~msft~vscom~nav&campaign=o~msft~vscom~nav)
[Free
Account](https://go.microsoft.com/fwlink/?LinkId=307137&clcid=0x409&wt.mc_id=o~msft~vscom~product-vsts-nav~menu&campaign=o~msft~vscom~product-vsts-nav~menu)

































[Home](https://www.visualstudio.com)/Improving
software security with stack traces from bug
reports



















# Improving software security with stack traces from bug reports

### By Kim Herzig



#### About the author





[Facebook](https://www.facebook.com/sharer.php?u=https%3A%2F%2Fwww.visualstudio.com%2Flearn%2Fimproving-software-security-stack-traces-bug-reports%2F&t=Improving%20software%20security%20with%20stack%20traces%20from%20bug%20reports "Facebook")[Twitter](https://twitter.com/share?text=Improving%20software%20security%20with%20stack%20traces%20from%20bug%20reports&url=https%3A%2F%2Fwww.visualstudio.com%2Flearn%2Fimproving-software-security-stack-traces-bug-reports%2F "Twitter")[Linkedin](https://www.linkedin.com/shareArticle?mini=true&url=https://www.visualstudio.com/learn/improving-software-security-stack-traces-bug-reports/&title=Improving%20software%20security%20with%20stack%20traces%20from%20bug%20reports&summary=Improving%20software%20security%20with%20stack%20traces%20from%20bug%20reports%0D%0AAuthor%3A%20Kim%20Herzig%0D%0ALast%20Update%3A%209%2F27%2F2016%0D%0A%0D%0AAs%20digital%20services%20connect%20sensitive%20data%20about%20nearly%20all%20aspects%20of%20our%20daily%20lives%2C%20software%20security%20may%20never%20have%20been%20as%20important%20as%20it%20i "Linkedin")[Email](mailto:?subject=Improving%20software%20security%20with%20stack%20traces%20from%20bug%20reports&body=https://www.visualstudio.com/learn/improving-software-security-stack-traces-bug-reports/ "Email")



















# Improving software security with stack traces from bug reports

### Author: Kim Herzig

Last Update: 9/27/2016

As digital services connect sensitive data about nearly all aspects of
our daily lives, software security may never have been as important as
it is today. Breaking even simple systems may have significant
consequences for individuals, companies, or even diplomatic relations
between countries. Software security exploits continue to escalate in
severity and sophistication. (For example, see the semiannual [Microsoft
Security Intelligence
Report](https://www.microsoft.com/security/sir/default.aspx).) Even one
security issue can have catastrophic consequences for both software
users and software development
teams.

## Prioritizing the security assessment for the most likely areas of vulnerability

Therefore, security assessment and testing efforts are a necessity for
software projects and a part of the daily development routine. But they
are time-consuming and expensive to apply. In many cases, security
reviews require human supervision and judgment, especially with
increasing complexity of software systems and their exposure to
untrusted user input. Finding vulnerabilities can be a search for a
needle in the haystack. This research examines how to use data from
existing bug reports to narrow the search.

## Any code change is a risk

During the development of a software program, any code change can
potentially inject security vulnerabilities or expose legacy code
containing previously dormant security vulnerabilities. Development
teams use a number of different techniques to verify if their code
contains security vulnerabilities, such as design reviews, input
fuzzing, static code verifiers, and code reviews. The Microsoft security
team developed the Security Development Lifecycle (SDL) \[1\] to help
its developers build more secure software through the systematic use of
these techniques. Which code parts are most vulnerable?

For large software products, indiscriminately using reviews to catch
security defects can be impractical. Dowd et al. \[2\] suggest that good
security reviewers can cover between 100 and 1000 lines per hour. That
implies that a complete security review for the 70+ million lines of
code in the Windows code base could take between 35 and 350
person-years. In such a case, you have to prioritize vulnerability
detection and removal techniques to the most suspicious areas of the
product. How is my code exposed to untrusted input?

Many vulnerabilities are caused by untrusted user input handled by code
that makes incomplete or wrong assumptions about the data it handles. It
is easy to identify code that is directly processing user inputs.
However, code fragments that handle data that depends on user input or
that is indirectly exposed to such untrusted data, can be more difficult
to find.

## Start with identifying the attack surfaces

Attack surfaces \[3,4\] are formal descriptions of entry points to a
system that might be vulnerable. These descriptions usually describe
methods, channels, untrusted data, and a direct and indirect entry and
exit point that identifies code areas handling untrusted data. Security
professionals can focus their first efforts on code on the attack
surface because it contains vulnerabilities that are reachable, and
therefore exploitable, by malicious users. Code not on the attack
surface may contain latent vulnerabilities, but these are much harder to
reach by malicious users. With this prioritization, the security
professional could find vulnerabilities more efficiently.

## Difficulty of finding the attack surface

Still, it is not easy to identify an attack surface. In most cases,
defining attack surfaces or single attack vectors requires human effort,
which is expensive and takes time. A further difficulty is that the
software product is constantly evolving as code changes are applied.
These changes lead to an always incomplete picture of the attack surface
and a constant need to refine it. It would desirable to have data help
identify likely attack surface and make the effort easier.

## Using bug reports and stack traces to approximate attack surfaces

The good news is that data often is available. Many bug reports
collected from various internal or external verification efforts contain
stack traces that portray an important picture of the state of a
software system at the time of failure. Code that appears in the stack
traces was executing when a user (or a tester) was performing an action,
is therefore by definition reachable by a user. Each stack trace from a
user-initiated crash has three attributes:

1.  it represents a user activity that puts the system in an undesirable
    condition;
2.  it includes both direct and indirect entry points; and
3.  it provides a control and data flow sub-graph of the potentially
    vulnerable code path.

Combining the information of single stack traces into a combined data
set yields an attack surface approximation (Figure 1).

![Figure 1: Parsing stack traces into a dependency graph and extracting
attack surface
information](https://www.visualstudio.com/wp-content/uploads/2017/08/parsing-stack-traces.png)

> Figure 1. Parsing stack traces into a dependency graph and extracting
> attack surface information

## How many vulnerabilities do stack traces reveal?

Creating this approximation can be fully automated and takes only
minutes, even for large software systems, such as Microsoft Windows. The
resulting attack surface approximation is neither complete nor entirely
reliable, but it is very helpful. In a study on the Microsoft Windows,
we found that our attack surface approximation narrows down the size of
the haystack by more than 50% while still containing 95% of all
vulnerabilities. The same holds true for Mozilla’s Firefox \[5\].

## Opportunities

Attack surface approximations as discussed in this article offer many
opportunities beyond the simple task of narrowing down the search space
of vulnerabilities.

## Comparing stack trace sets

Comparing attack surface approximations derived from different data
sets, e.g. verification crashes versus crashed reported by actual
customers, can help us to identify usage scenarios that should be
verified more thoroughly. Going one step further, we can use the
incomplete but vulnerable control and data flow sub-graph represented by
the corresponding stack trace(s) to suggest verification scenarios and
test cases for a particular component.

### Understanding vulnerability patterns

In addition to understanding which parts of the code handle untrusted
data, it is important to identify attack patterns. Stack traces help
there too. Stack traces in bug reports identify not only system internal
code artifacts, but also external components that caused a crash.
Knowing who submitted malicious data and how it was entered can be very
important to identify attack patterns or potentially malicious software
components interacting with the system under review.

### Modernizing legacy code & discovering changes to attack surface area

Being able to generate attack surface approximations easily and fast
also allows us to compute them at regular intervals and to compare
differences between these attack surface approximations. **Detecting new
code artifacts on an attack surface should raise concerns and trigger
security reviews**, especially when the newly exposed code is identified
as legacy code. This may contain latent vulnerabilities whose fixes were
previously deprioritized.

## References

\[1\] Howard, M. and Lipner, S. The Security Development Lifecycle.
Microsoft Press, 2006.

\[2\] Christopher Theisen. “Automated attack surface approximation,” in
Proceedings of the 2015 10th Joint Meeting on Foundations of Software
Engineering (ESEC/FSE 2015).

\[3\] M. Howard, J. Pincus and J. M. Wing, “Measuring Relative Attack
Surfaces,” in Computer Security in the 21st Century, Springer US, 2005.

\[4\] P. Manadhata and J. Wing, “An Attack Surface Metric,” Software
Engineering, IEEE Transactions on, vol. 37, no. 3

\[5\] Automated Attack Surface Approximation, Chris Theissen,




  [Kim
Herzig](https://www.visualstudio.com/author/kimh/ "Posts by Kim Herzig")
  
2017-08-14T16:57:50+00:00 







![Kim
Herzig](https://www.visualstudio.com/wp-content/uploads/2017/08/kimh_avatar_1502754815-130x130.jpg)





### Kim Herzig

Kim leads the analytical team on the Tools for Software Engineers team.
The focuses lies on helping development teams to speed up their
development process(es) while maintaining or increasing product quality
and reliability.















  - [DevOps at
    Microsoft](https://www.visualstudio.com/learn/devops-at-microsoft/)
  - [How We Work with Visual Studio Team
    Services (VSTS)](#)
      - [Moving to Cloud
        Cadence](https://www.visualstudio.com/learn/moving-cloud-cadence/)
      - [How We Use Git at
        Microsoft](https://www.visualstudio.com/learn/use-git-microsoft/)
      - [Evolving Test Practices at
        Microsoft](https://www.visualstudio.com/learn/evolving-test-practices-microsoft/)
  - [How We Architect Visual Studio Team
    Services (VSTS)](#)
      - [From Monolith to Cloud
        Service](https://www.visualstudio.com/learn/monolith-cloud-service/)
      - [Achieving No Downtime Through
        Versioned Service
        Updates](https://www.visualstudio.com/learn/achieving-no-downtime-versioned-service-updates/)
      - [Progressive Experimentation with
        Feature
        Flags](https://www.visualstudio.com/learn/progressive-experimentation-feature-flags/)
      - [Patterns for Resiliency in the
        Cloud](https://www.visualstudio.com/learn/patterns-resiliency-cloud/)
      - [Shift Left to Make Testing Fast and
        Reliable](https://www.visualstudio.com/learn/shift-left-make-testing-fast-reliable/)
      - [Eliminating Flaky
        Tests](https://www.visualstudio.com/learn/eliminating-flaky-tests/)
      - [Shift Right to Test in
        Production](https://www.visualstudio.com/learn/shift-right-test-production/)
  - [One Engineering System at
    Microsoft](#)
      - [Moving 65,000 Microsofties to DevOps
        on the Public
        Cloud](https://www.visualstudio.com/learn/moving-65000-microsofties-devops-public-cloud/)
      - [Universal Store: Journey to
        Continuous Delivery and
        DevOps](https://www.visualstudio.com/learn/universal-store-journey-continuous-delivery-devops/)
  - [Microsoft Research on DevOps
    Productivity](#)
      - [Boosting your code reviews with
        useful
        comments](https://www.visualstudio.com/learn/boosting-code-reviews-useful-comments/)
      - [Code reviews are not (primarily) for
        finding
        bugs](https://www.visualstudio.com/learn/code-reviews-not-primarily-finding-bugs/)
      - [Code ownership and software
        quality](https://www.visualstudio.com/learn/code-ownership-software-quality/)
      - [Getting the noise out of test
        runs](https://www.visualstudio.com/learn/getting-noise-test-runs/)
      - [Improving software security with
        stack traces from bug
        reports](https://www.visualstudio.com/learn/improving-software-security-stack-traces-bug-reports/)
      - [Is 100% code coverage worth the
        cost?](https://www.visualstudio.com/learn/100-code-coverage-worth-cost/)
      - [Software testing at scale to
        increase
        velocity](https://www.visualstudio.com/learn/software-testing-scale-increase-velocity/)
      - [Test while building to maximize test
        effectiveness and minimize
        cost](https://www.visualstudio.com/learn/test-building-maximize-test-effectiveness-minimize-cost/)
      - [Using a simple code churn metric to
        find software
        bugs](https://www.visualstudio.com/learn/using-simple-code-churn-metric-find-software-bugs/)



















  - [** DevOps at Microsoft](/learn/devops-at-microsoft/)
  - [** Blog](https://blogs.msdn.microsoft.com/devops/)
  - [** Learn DevOps](/learn/what-is-devops/)
  - [![](/wp-content/uploads/2016/11/git-footer-icons-dark_2.png) Learn
    Git](/learn-git/)
  - [** Learn Agile](/agile/)
  - [** DevOps Self-Assessment](https://devopsassessment.net/)













[Visual Studio Team Services](/team-services/) provides the tools you
need to continuously deliver
value





















#### What's new

  - [Surface
    Book 2](https://www.microsoft.com/en-us/surface/devices/surface-book-2/overview)
  - [Surface
    Pro](https://www.microsoft.com/en-us/surface/devices/surface-pro/overview)
  - [Xbox One X](https://www.xbox.com/en-us/xbox-one-x)
  - [Xbox One S](https://www.xbox.com/en-us/xbox-one-s?xr=shellnav)
  - [VR & mixed
    reality](https://www.microsoft.com/en-us/store/b/virtualreality)
  - [Windows 10
    apps](https://www.microsoft.com/en-us/windows/windows-10-apps)
  - [Office
apps](https://store.office.com/en-us/appshome.aspx?)





#### Store & Support

  - [Account profile](https://account.microsoft.com/)
  - [Download Center](https://www.microsoft.com/en-us/download)
  - [Sales &
    support](https://go.microsoft.com/fwlink/p/?LinkID=824761&clcid=0x409)
  - [Returns](https://go.microsoft.com/fwlink/p/?LinkID=824764&clcid=0x409)
  - [Order tracking](https://account.microsoft.com/orders)
  - [Store
    locations](https://www.microsoft.com/en-us/store/locations/find-a-store)
  - [Support](https://support.microsoft.com/en-us)
  - [Buy online, pick up in
    store](https://www.microsoft.com/en-us/store/b/buy-online-pick-up-in-store?icid=uhf_footer_bopuis)





#### Education

  - [Microsoft in education](https://www.microsoft.com/en-us/education)
  - [Office for
    students](https://www.microsoft.com/en-us/education/products/office/default.aspx)
  - [Office 365 for
    schools](https://products.office.com/en-us/academic/compare-office-365-education-plans)
  - [Deals for students &
    educators](https://www.microsoft.com/en-us/store/b/student)
  - [Microsoft Azure in
    education](https://azure.microsoft.com/en-us/community/education/)









#### Enterprise

  - [Microsoft Azure](https://azure.microsoft.com/)
  - [Enterprise](https://enterprise.microsoft.com/en-us/)
  - [Data platform](https://www.microsoft.com/en-us/sql-server/)
  - [Find a solutions
    provider](https://www.microsoft.com/en-us/solution-providers)
  - [Microsoft partner resources](https://partner.microsoft.com/en-us/)
  - [Microsoft
    AppSource](https://go.microsoft.com/fwlink/?LinkID=808093)
  - [Manufacturing &
    resources](https://enterprise.microsoft.com/en-us/industries/discrete-manufacturing/)
  - [Financial
services](https://enterprise.microsoft.com/en-us)





#### Developer

  - [Microsoft Visual Studio](https://www.visualstudio.com/)
  - [Windows Dev Center](https://developer.microsoft.com/en-us/windows)
  - [Developer Network](https://msdn.microsoft.com/en-us)
  - [TechNet](https://technet.microsoft.com/en-us)
  - [Microsoft Virtual Academy](https://mva.microsoft.com/)
  - [Microsoft developer
    program](https://developer.microsoft.com/en-us/store/register)
  - [Channel 9](https://channel9.msdn.com/)
  - [Office Dev
Center](https://developer.microsoft.com/en-us/office)





#### Company

  - [Careers](https://careers.microsoft.com/)
  - [About Microsoft](https://www.microsoft.com/en-us/about)
  - [Company news](https://news.microsoft.com/)
  - [Privacy at Microsoft](https://privacy.microsoft.com/en-us)
  - [Investors](https://www.microsoft.com/investor/default.aspx)
  - [Diversity and
    inclusion](https://www.microsoft.com/en-us/diversity/)
  - [Accessibility](https://www.microsoft.com/en-us/accessibility/home)
  - [Security](https://www.microsoft.com/en-us/security/default.aspx)







[English (United States)](#)

  - [Contact us](https://beta.visualstudio.com/support/)
  - [Privacy &
    cookies](https://www.microsoft.com/EN-US/privacystatement/OnlineServices/Default.aspx)
  - [Terms of use](https://azure.microsoft.com/en-us/support/legal/)
  - [Trademarks](https://www.microsoft.com/trademarks)
  - [About our ads](http://choice.microsoft.com/)
  - © Microsoft 2018












